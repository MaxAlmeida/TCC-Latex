\chapter{Análise de Resultados}
\label{cap:resultados}
Neste capítulo são apresentados os resultados encontrados a partir dos três experimentos efetuados. Assim  %Primeiro são apresentados os resultados encontrados  nos três experimentos, sendo assim feita uma análise da interferência nos mesmos. Em seguida é feita uma análise estatistica do experimento três sendo assim abordada, a questão da predição de desempenho

\section{Interferência de Desempenho}
No primeiro experimento tinha como intuito, observar se de fato havia algum tipo de interferência significativa durante a execução de aplicações em máquinas virtuais concorrentes. Para isso, foram selecionadas as seguintes ferramentas: \textit{bzip2}, \textit{grep}, \textit{povray}, \textit{crypt} e \textit{cp} para calculo da degradação. A imagem \ref{first_experiment} apresenta os resultados para esse conjunto de aplicações, utlizando a equação \ref{eq:combined}. 

\begin{figure}[!htb]
\centering
\includegraphics [keepaspectratio=true,scale=0.65]{graficos/exp1.eps}
\caption{Variação de desempenho para um conjunto de aplicações}
\label{first_experiment}
\end{figure} 

Levando-se em conta que cada aplicação consome exatamente metade dos recursos computacionais, o desempenho esperado seria 1. Entretanto, por conta da variação de interferência dada a combinação de aplicações, o desempenho também muda. Desse modo, aplicações que raramente interferem no desempenho uma da outra, a pontuação se a proxima de 2. Em contrapartida, aplicações que interferêm substancialmente uma na outra, sua pontuação tende a cair drasticamente. Os resultados apresentados neste experimento, mostram por exemplo que \textit{povray+grep} apresentam um grau de interferência praticamente nulo, enquanto que \textit{cp + bzpip} o grau de interferência é maior a ponto da pontuação se aproximar de 1. Desse modo era de se esperar, que dado os resultados referentes a interferência de aplicações apresentados no trabalho de \citeonline{koh2007}, que a performance combinada de aplicações iguais caisse drasticamente. Uma das hipóteses é que a configuração de \textit{hardware} utilizada neste trabalho, típica para ambientes em produção, minimiza o grau de degradação de algumas aplicações, mesmo quando executadas contra elas mesmas em máquinas virtuais diferentes. Em específico, foi utilizado nesse servidor uma configuração de redundância de disco \textit{RAID 5}, o que pode minimizar ainda mais a degradação de desempenho para aplicações com perfis de \textit{Entrada/Saida} como \textit{Grep} e \textit{Crypt}.

Segundo \citeonline{koh2007}, uma aplicação executando sem qualquer máquina virtual concorrente, possui os benefícios de se aproveitar da velocidade mais alta da memória \textit{cache} obtendo dessa forma ganhos de desempenho. Em contrapartida, com outra máquina virtual em execução concorrente em um mesmo servidor, durante a execução de uma aplicação o \textit{hypervisor} pode mudar para outra máquina virtual (no final de um \textit{quantum}). Sendo a \textit{cache} então agora utilizada por outra máquina virtual. Ao voltar para máquina virtual de origem, é bastante provável que a  \textit{cache} esteja inutilizável. Outro problema que \citeonline{koh2007} cita é que é bastante difícil de prever e tratar esse tipo de problema dado que as máquinas virtuais não possui informações sobre as mudanças de contexto feitas pelo \textit{hypervisor}, e nem mesmo os próprios \textit{hypervisor} possuim informações sobre as aplicações que estão sendo executadas nas máquinas virtuais.

Um dos receios era que os procedimentos definidos na metodologia não fossem suficientes, dada a configuração de \textit{hardware} do servidor, para observar a degradação de desempenho das aplicações. Entretanto, com resultados desse experimento demonstraram que com esses procedimentos é possível observar um grau de interferência para um conjunto de aplicações. O próximo passo então era observar o grau de interferência para um conjunto maior de aplicações afim de observar padrões de interferências dados os tipos aplicações.

\section{Desempenho contra diferentes tipos de Aplicações}
No segundo experimento fora construída uma matriz  \textit{N x N} com as combinações possíveis das aplicações sendo executadas tanto quanto \textit{Background } como \textit{Foreground}. Desse, modo contou-se com mais combinações de resultados de modo que agora era possível observar se existia ou não um padrão de degradação dado o tipo de aplicação que estava sendo executada. Para apresentação desses resultados foram selecionados as ferramentas que tiveram resultados mais significados seja no sentido de ter proporcionado interferência quanto de não ter proporcionado. A figura \ref{second_experiment} apresenta esses resultados.

\begin{figure}[!h]
\centering
\includegraphics [keepaspectratio=true,scale=0.5]{graficos/exp2.eps}
\caption{Variação de desempenho para um conjunto de aplicações}
\label{second_experiment}
\end{figure} 

Os resultados deste segundo experimento mostram que de maneira geral algumas aplicações tendem a sofrer e a causar menos interferência do que outras aplicações. É caso de \textit{add\_double}, \textit{cachebench}, \textit{make} e \textit{povray}. Não por acaso são ferramentas que não possuem perfis de cargas de trabalho voltados para operações de \textit{entrada/saída} ( \textit{add\_double} possue perfil voltado para \textit{cpu}, \textit{make} e \textit{povray} possuem perfil misto mas mais voltado para operações em \textit{cpu} do que de \textit{entrada/saída} e \textit{cachebench} é mais voltado para operações no sistema de memória). 

Assim, nota-se que essas aplicações por possuirem um perfil de carga de trabalho voltado mais para \textit{cpu} e memória (no caso do \textit{cachebench} praticamente não interferem em aplicações que possuem um perfil voltado para \textit{operações de entrada/saída} e nem mesmo sofrem interferência significativa desse tipo de aplicações. Como pode ser observado, por exemplo os resultados apresentados na execução de \textit{povray} contra algumas ferramentas apresentados na imagem \ref{second_experiment}. Nota-se que a pontuação de \textit{povray} contra esse conjunto de aplicações ficou próxima de 2 o que indica o grau de interferência bastante insignificante, o mesmo ocorrendo com \textit{add\_double}.

No caso do \textit{cachebench}, mesmo tendo sido uma das ferramentas que menos sofreu interferência, percebe-se um grau de interferência mais elevado do que das outras duas (\textit{povray} e \textit{add\_double}, isso se deve ao fato que o sistema de memória acaba atuando principalmente em operações de \textit{cache} tanto em aplicações com perfil voltado para \textit{cpu} quanto em aplicações com perfil voltado para operações de \textit{entrada/saída}.

Para o restante das aplicações, observa-se um grau de interferência maior e com mais variações dependendo da aplicação que está sendo executada em \textit{background}. Essas aplicações, são típicas aplicações de \textit{entrada/saída}, com suas cargas de trabalho atuando em operações de escrita ou leitra em disco. Observa-se por exemplo, que \textit{dd} e \textit{cp} são as aplicações que causam maior degradação no desempenho das aplicações voltadas para \textit{entrada/saída}. Assim um dos resultados apresentado mostra que executando \textit{Bzip2} contra \textit{dd} a pontuação fica próxima de 0.5, evidenciando um elevado grau de degradação.


Dada a variação de interferência de desempenho entre essas aplicações vale ressaltar alguns casos. Entre eles, destaca-se por exemplo que a pontuação alcançada de \textit{gzip} e \textit{bzip2} contra \textit{grep} indica um grau de degradação de desempenho pequeno ou praticamente nulo. Em contrapartida, a pontuação alcançada por \textit{cp}, \textit{cat} e \textit{dd} contra \textit{grep}, mostram uma degradação do desempenho maior se comparada com \textit{gzip} e \textit{bzip2} contra \textit{grep}. Indicando, dessa forma que mesmo dentre as aplicações típicas de \textit{entrada/saída} pode haver um padrão de interferência dado o seu tipo de execução( escrita ou leitura). 
% Além disso, nota ferramentas quando executadas contra ferramentas com o mesmo perfil de execução (\textit{cpu} x \textit{cpu}), demonstram uma interferência insignificante. 


 %Entretanto, os resultados de \textit{grep+grep} e \textit{crypt+crypt} mostram que mesmo aplicações iguais podem não interferir tanto quanto o esperado. Uma das hipóteses iniciais é de que configuração de disco em \textit{raid 5} do servidor, minimiza a interferência para aplicações com perfis de \textit{Entrada\Saída} como \textit{Grep} e \textit{Crypt}. Outro fator que 

  

%Análise da interferencia
%primeiro experimento
%segundo experimento
%Terceiro experimento
%características a nível de sistema
